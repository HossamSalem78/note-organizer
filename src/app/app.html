<nav class="navbar" *ngIf="shouldShowHeader()">
  <div class="nav-container">
    <div class="nav-brand">
      <a routerLink="/notes">
        <fa-icon [icon]="faFolder" class="brand-icon"></fa-icon>
        Note Organizer
      </a>
    </div>
    
    <!-- Search Bar and Type Dropdown -->
    <div class="search-section" *ngIf="shouldShowSearchSection()">
      <div class="search-container">
        <fa-icon [icon]="faSearch" class="search-icon"></fa-icon>
        <input 
          type="text" 
          [placeholder]="getSearchPlaceholder()"
          [(ngModel)]="searchTerm"
          (input)="onSearchChange($event)"
          class="search-input"
        >
        <button 
          *ngIf="searchTerm" 
          (click)="clearSearch()" 
          class="clear-search-btn"
          type="button"
        >
          <fa-icon [icon]="faTimes"></fa-icon>
        </button>
      </div>
      
      <div class="search-type-container">
        <select 
          [(ngModel)]="searchType"
          (change)="onSearchTypeChange()"
          class="search-type-dropdown"
        >
          <option value="all">All</option>
          <option value="title">Title</option>
          <option value="content">Content</option>
        </select>
      </div>
    </div>

    <!-- Teams Search Bar and Type Dropdown -->
    <div class="search-section" *ngIf="shouldShowTeamsSearchSection()">
      <div class="search-container">
        <fa-icon [icon]="faSearch" class="search-icon"></fa-icon>
        <input 
          type="text" 
          [placeholder]="getTeamsSearchPlaceholder()"
          [(ngModel)]="teamsSearchTerm"
          (input)="onTeamsSearchChange($event)"
          class="search-input"
        >
        <button 
          *ngIf="teamsSearchTerm" 
          (click)="clearTeamsSearch()" 
          class="clear-search-btn"
          type="button"
        >
          <fa-icon [icon]="faTimes"></fa-icon>
        </button>
      </div>
      
      <div class="search-type-container">
        <select 
          [(ngModel)]="teamsSearchType"
          (change)="onTeamsSearchTypeChange()"
          class="search-type-dropdown"
        >
          <option value="all">All</option>
          <option value="teams">Teams</option>
          <option value="members">Team Members</option>
        </select>
      </div>
    </div>
    
    <!-- Navigation for authenticated users -->
    <div class="nav-links" *ngIf="authService.isAuthenticated()">
      <div class="user-section">
        <div class="header-navigation">
          <a routerLink="/notes" routerLinkActive="active" class="nav-link">Notes</a>
          <a routerLink="/team-members" routerLinkActive="active" class="nav-link">Teams</a>
        </div>
        <div class="user-dropdown-container">
          <button class="user-dropdown-btn" (click)="toggleUserDropdown()">
            <span class="welcome-text">Hello {{ authService.getCurrentUser()?.firstName }} {{ authService.getCurrentUser()?.lastName }}</span>
            <fa-icon [icon]="faCaretDown" class="caret-icon"></fa-icon>
          </button>
          <div class="user-dropdown" *ngIf="showUserDropdown">
            <button class="dropdown-item" (click)="openViewProfileModal()">
              <fa-icon [icon]="faUser"></fa-icon>
              View Profile
            </button>
            <button class="dropdown-item logout-item" (click)="logout()">
              <fa-icon [icon]="faSignOutAlt"></fa-icon>
              Logout
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Navigation for unauthenticated users -->
    <div class="nav-links" *ngIf="!authService.isAuthenticated()">
      <a routerLink="/login" routerLinkActive="active">Login</a>
      <a routerLink="/register" routerLinkActive="active">Register</a>
    </div>
  </div>
</nav>

<!-- Create Note Modal -->
<div class="modal-overlay create-note-modal" *ngIf="showCreateNoteModal" (click)="closeCreateNoteModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Create New Note</h2>
      <button class="close-btn" (click)="closeCreateNoteModal()">√ó</button>
    </div>
    
    <div class="modal-body">
      <form [formGroup]="noteForm" class="note-form">
        <div class="form-group">
          <label for="title">Title *</label>
          <input 
            type="text" 
            id="title" 
            formControlName="title"
            class="form-control"
            placeholder="Enter note title"
            [class.is-invalid]="titleControl?.invalid && titleControl?.touched"
            #titleInput
          >
          <div *ngIf="titleControl?.invalid && titleControl?.touched" class="error-message">
            <div *ngIf="titleControl?.errors?.['required']">Title is required</div>
            <div *ngIf="titleControl?.errors?.['minlength']">Title must be at least 1 character</div>
          </div>
        </div>

        <div class="form-group">
          <label for="content">Content *</label>
          <div class="rich-text-editor">
            <div class="editor-toolbar">
              <button type="button" class="format-btn" (click)="formatText('bold')" title="Bold">
                <strong>B</strong>
              </button>
              <button type="button" class="format-btn" (click)="formatText('italic')" title="Italic">
                <em>I</em>
              </button>
              <button type="button" class="format-btn" (click)="formatText('underline')" title="Underline">
                <u>U</u>
              </button>
              <button type="button" class="format-btn" (click)="formatText('insertUnorderedList')" title="Bullet List">
                ‚Ä¢ List
              </button>
              <button type="button" class="format-btn" (click)="formatText('insertOrderedList')" title="Numbered List">
                1. List
              </button>
              <div class="table-dropdown-container">
                <button type="button" class="format-btn" (click)="toggleTableDropdown()" title="Insert Table">
                  <fa-icon [icon]="faTable"></fa-icon> Table
                </button>
                <div class="table-dropdown" *ngIf="showTableDropdown" (click)="onTableDropdownClick($event)">
                  <div class="table-form">
                    <div class="table-size-inputs">
                      <div class="size-input-group">
                        <label>Rows:</label>
                        <input 
                          type="number" 
                          [value]="tableRows"
                          (change)="onTableRowsChange($event)"
                          min="1" 
                          max="20"
                          class="table-size-input"
                        >
                      </div>
                      <div class="size-input-group">
                        <label>Columns:</label>
                        <input 
                          type="number" 
                          [value]="tableColumns"
                          (change)="onTableColumnsChange($event)"
                          min="1" 
                          max="20"
                          class="table-size-input"
                        >
                      </div>
                    </div>
                    <div class="table-actions">
                      <button (click)="insertTable()" class="save-btn">Insert</button>
                      <button (click)="toggleTableDropdown()" class="cancel-btn">Cancel</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="link-dropdown-container">
                <button type="button" class="format-btn" (click)="toggleLinkDropdown()" title="Insert Link">
                  üîó Link
                </button>
                <div class="link-dropdown" *ngIf="showLinkDropdown" (click)="onLinkDropdownClick($event)">
                  <div class="link-form">
                    <input 
                      type="text" 
                      [(ngModel)]="newLinkUrl"
                      placeholder="Enter URL"
                      class="link-input"
                      (keyup.enter)="createLink()"
                      (input)="onLinkUrlChange($event)"
                      #linkUrlInput
                    >
                    <input 
                      type="text" 
                      [(ngModel)]="newLinkText"
                      placeholder="Enter link text (optional)"
                      class="link-input"
                      (keyup.enter)="createLink()"
                      (input)="onLinkTextChange($event)"
                    >
                    <div class="link-actions">
                      <button (click)="createLink()" class="save-btn" [disabled]="isLinkUrlEmpty()">Insert</button>
                      <button (click)="toggleLinkDropdown()" class="cancel-btn">Cancel</button>
                    </div>
                  </div>
                </div>
              </div>
              <button type="button" class="format-btn" (click)="insertImage()" title="Insert Image">
                üñºÔ∏è Image
              </button>
              <div class="table-controls" *ngIf="selectedTable">
                <button type="button" class="format-btn table-control-btn" (click)="addTableRow()" title="Add Row">
                  <fa-icon [icon]="faPlus"></fa-icon> Row
                </button>
                <button type="button" class="format-btn table-control-btn" (click)="removeTableRow()" title="Remove Row">
                  <fa-icon [icon]="faMinus"></fa-icon> Row
                </button>
                <button type="button" class="format-btn table-control-btn" (click)="addTableColumn()" title="Add Column">
                  <fa-icon [icon]="faColumns"></fa-icon> Col
                </button>
                <button type="button" class="format-btn table-control-btn" (click)="removeTableColumn()" title="Remove Column">
                  <fa-icon [icon]="faMinus"></fa-icon> Col
                </button>
                <button type="button" class="format-btn table-control-btn danger" (click)="deleteTable()" title="Delete Table">
                  <fa-icon [icon]="faTrash"></fa-icon> Delete
                </button>
              </div>
            </div>
            <div 
              class="editor-content"
              contenteditable="true"
              [class.is-invalid]="contentControl?.invalid && contentControl?.touched"
              (input)="onContentChange($event)"
              (blur)="onContentBlur()"
              placeholder="Enter note content..."
            ></div>
          </div>
          <div *ngIf="contentControl?.invalid && contentControl?.touched" class="error-message">
            <div *ngIf="contentControl?.errors?.['required']">Content is required</div>
            <div *ngIf="contentControl?.errors?.['minlength']">Content must be at least 1 character</div>
          </div>
        </div>

        <div class="form-group">
          <label for="folderId">Folder *</label>
          <select 
            id="folderId" 
            formControlName="folderId"
            class="form-control"
            [class.is-invalid]="folderIdControl?.invalid && folderIdControl?.touched"
          >
            <option value="">Select a folder</option>
            <option *ngFor="let folder of folders" [value]="folder.id">
              {{ folder.name }}
            </option>
          </select>
          <div *ngIf="folderIdControl?.invalid && folderIdControl?.touched" class="error-message">
            <div *ngIf="folderIdControl?.errors?.['required']">Folder is required</div>
          </div>
        </div>

        <div class="form-group">
          <label>Tags</label>
          <div class="tags-selection">
            <div class="tags-list">
              <div 
                *ngFor="let tag of tags" 
                class="tag-option"
                [class.selected]="isTagSelected(tag.id)"
                (click)="toggleTagSelection(tag.id)"
              >
                {{ tag.name }}
              </div>
            </div>
            <div *ngIf="getSelectedTags().length > 0" class="selected-tags">
              <span class="selected-tags-label">Selected:</span>
              <span *ngFor="let tag of getSelectedTags()" class="selected-tag">
                {{ tag.name }}
                <button 
                  type="button" 
                  class="remove-tag-btn" 
                  (click)="removeTagSelection(tag.id)"
                  title="Remove tag"
                >
                  √ó
                </button>
              </span>
            </div>
          </div>
        </div>

        

        <div class="form-group">
          <label for="category">Category</label>
          <input 
            type="text" 
            id="category" 
            formControlName="category"
            class="form-control"
            placeholder="Enter category (optional)"
          >
        </div>
        <div class="form-group">
          <label>Add Team</label>
          <div class="team-selection">
            <div class="dropdown-container">
              <button 
                type="button"
                class="dropdown-toggle" 
                (click)="toggleTeamDropdown()"
              >
                <span *ngIf="!selectedTeamToAssign">Select a team to assign...</span>
                <span *ngIf="selectedTeamToAssign">{{ selectedTeamToAssign.name }}</span>
                <fa-icon [icon]="faPlus"></fa-icon>
              </button>
              
              <div class="dropdown-menu" *ngIf="showTeamDropdown">
                <div class="dropdown-options">
                  <div 
                    class="dropdown-option" 
                    *ngFor="let team of availableTeams"
                    (click)="selectTeamToAssign(team)"
                  >
                    {{ team.name }}
                  </div>
                  <div 
                    class="dropdown-option no-results" 
                    *ngIf="availableTeams.length === 0"
                  >
                    No teams available
                  </div>
                </div>
              </div>
            </div>
            
            <div *ngIf="getAssignedTeams().length > 0" class="assigned-teams">
              <span class="assigned-teams-label">Selected:</span>
              <span *ngFor="let team of getAssignedTeams()" class="assigned-team">
                {{ team.name }}
                <button 
                  type="button" 
                  class="remove-tag-btn" 
                  (click)="removeAssignedTeam(team.id)"
                  title="Remove team"
                >
                  √ó
                </button>
              </span>
            </div>
          </div>
        </div>

      </form>
    </div>
    
    <div class="modal-footer">
      <button type="submit" class="save-btn" [disabled]="noteForm.invalid || creatingNote" (click)="createNote()">Create Note</button>
      <button type="button" class="cancel-btn" (click)="closeCreateNoteModal()">Cancel</button>
    </div>
  </div>
</div>

<!-- Note Details Modal -->
<div class="modal-overlay" *ngIf="showNoteDetailsModal" (click)="closeNoteDetailsModal()">
  <div class="modal-content note-details-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>{{ selectedNote?.title }}</h2>
      <div class="modal-actions">
        <button class="edit-btn" (click)="openEditNoteModal(selectedNote!)" title="Edit note" *ngIf="selectedNote">
          <fa-icon [icon]="faPen"></fa-icon>
        </button>
        <button class="delete-btn" (click)="openDeleteConfirmationModal(selectedNote!)" title="Delete note" *ngIf="selectedNote">
          <fa-icon [icon]="faTrashAlt"></fa-icon>
        </button>
        <button class="close-btn" (click)="closeNoteDetailsModal()">√ó</button>
      </div>
    </div>
    
    <div class="modal-body">
      <div class="note-details-content">
        <div class="note-section">
          <h3>Content</h3>
          <div class="note-full-content" [innerHTML]="selectedNote?.content"></div>
        </div>
        
        <div class="note-section">
          <h3>Note Information</h3>
          <div class="note-info-container">
            <!-- Folder and Category Row -->
            <div class="note-info-row">
              <!-- Folder -->
              <div class="note-info-section half-width">
                <div class="info-title">Folder</div>
                <div class="info-content">
                  {{ selectedNote?.folderId ? getFolderName(selectedNote?.folderId!) : '--' }}
                </div>
              </div>
              
              <!-- Category -->
              <div class="note-info-section half-width">
                <div class="info-title">Category</div>
                <div class="info-content">
                  {{ selectedNote?.category || '--' }}
                </div>
              </div>
            </div>
            
            <!-- Tags -->
            <div class="note-info-section">
              <div class="info-title">Tags</div>
              <div class="info-content">
                <div *ngIf="selectedNote && getNoteTags(selectedNote).length > 0" class="note-tags">
                  <span *ngFor="let tag of getNoteTags(selectedNote!)" class="tag-pill">{{ tag.name }}</span>
                </div>
                <div *ngIf="!selectedNote || getNoteTags(selectedNote!).length === 0" class="no-info">--</div>
              </div>
            </div>
            
            <!-- Teams -->
            <div class="note-info-section">
              <div class="info-title">Teams</div>
              <div class="info-content">
                <div *ngIf="selectedNote && getNoteTeams(selectedNote).length > 0" class="note-teams">
                  <span *ngFor="let team of getNoteTeams(selectedNote!)" class="team-pill">{{ team.name }}</span>
                </div>
                <div *ngIf="!selectedNote || getNoteTeams(selectedNote!).length === 0" class="no-info">--</div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Edit Note Modal -->
<div class="modal-overlay edit-note-modal" *ngIf="showEditNoteModal" (click)="closeEditNoteModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Edit Note</h2>
      <button class="close-btn" (click)="closeEditNoteModal()">√ó</button>
    </div>
    
    <div class="modal-body">
      <form [formGroup]="editNoteForm" class="note-form">
        <div class="form-group">
          <label for="editTitle">Title *</label>
          <input 
            type="text" 
            id="editTitle" 
            formControlName="title"
            class="form-control"
            placeholder="Enter note title"
            [class.is-invalid]="editTitleControl?.invalid && editTitleControl?.touched"
          >
          <div *ngIf="editTitleControl?.invalid && editTitleControl?.touched" class="error-message">
            <div *ngIf="editTitleControl?.errors?.['required']">Title is required</div>
            <div *ngIf="editTitleControl?.errors?.['minlength']">Title must be at least 1 character</div>
          </div>
        </div>

        <div class="form-group">
          <label for="editContent">Content *</label>
          <div class="rich-text-editor">
            <div class="editor-toolbar">
              <button type="button" class="format-btn" (click)="formatText('bold')" title="Bold">
                <strong>B</strong>
              </button>
              <button type="button" class="format-btn" (click)="formatText('italic')" title="Italic">
                <em>I</em>
              </button>
              <button type="button" class="format-btn" (click)="formatText('underline')" title="Underline">
                <u>U</u>
              </button>
              <button type="button" class="format-btn" (click)="formatText('insertUnorderedList')" title="Bullet List">
                ‚Ä¢ List
              </button>
              <button type="button" class="format-btn" (click)="formatText('insertOrderedList')" title="Numbered List">
                1. List
              </button>
              <div class="table-dropdown-container">
                <button type="button" class="format-btn" (click)="toggleTableDropdown()" title="Insert Table">
                  <fa-icon [icon]="faTable"></fa-icon> Table
                </button>
                <div class="table-dropdown" *ngIf="showTableDropdown" (click)="onTableDropdownClick($event)">
                  <div class="table-form">
                    <div class="table-size-inputs">
                      <div class="size-input-group">
                        <label>Rows:</label>
                        <input 
                          type="number" 
                          [value]="tableRows"
                          (change)="onTableRowsChange($event)"
                          min="1" 
                          max="20"
                          class="table-size-input"
                        >
                      </div>
                      <div class="size-input-group">
                        <label>Columns:</label>
                        <input 
                          type="number" 
                          [value]="tableColumns"
                          (change)="onTableColumnsChange($event)"
                          min="1" 
                          max="20"
                          class="table-size-input"
                        >
                      </div>
                    </div>
                    <div class="table-actions">
                      <button (click)="insertTable()" class="save-btn">Insert Table</button>
                      <button (click)="toggleTableDropdown()" class="cancel-btn">Cancel</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="link-dropdown-container">
                <button type="button" class="format-btn" (click)="toggleLinkDropdown()" title="Insert Link">
                  üîó Link
                </button>
                <div class="link-dropdown" *ngIf="showLinkDropdown" (click)="onLinkDropdownClick($event)">
                  <div class="link-form">
                    <input 
                      type="text" 
                      [(ngModel)]="newLinkUrl"
                      placeholder="Enter URL"
                      class="link-input"
                      (keyup.enter)="createLink()"
                      (input)="onLinkUrlChange($event)"
                      #linkUrlInput
                    >
                    <input 
                      type="text" 
                      [(ngModel)]="newLinkText"
                      placeholder="Enter link text (optional)"
                      class="link-input"
                      (keyup.enter)="createLink()"
                      (input)="onLinkTextChange($event)"
                    >
                    <div class="link-actions">
                      <button (click)="createLink()" class="save-btn" [disabled]="isLinkUrlEmpty()">Insert</button>
                      <button (click)="toggleLinkDropdown()" class="cancel-btn">Cancel</button>
                    </div>
                  </div>
                </div>
              </div>
              <button type="button" class="format-btn" (click)="insertImage()" title="Insert Image">
                üñºÔ∏è Image
              </button>
              <div class="table-controls" *ngIf="selectedTable">
                <button type="button" class="format-btn table-control-btn" (click)="addTableRow()" title="Add Row">
                  <fa-icon [icon]="faPlus"></fa-icon> Row
                </button>
                <button type="button" class="format-btn table-control-btn" (click)="removeTableRow()" title="Remove Row">
                  <fa-icon [icon]="faMinus"></fa-icon> Row
                </button>
                <button type="button" class="format-btn table-control-btn" (click)="addTableColumn()" title="Add Column">
                  <fa-icon [icon]="faColumns"></fa-icon> Col
                </button>
                <button type="button" class="format-btn table-control-btn" (click)="removeTableColumn()" title="Remove Column">
                  <fa-icon [icon]="faMinus"></fa-icon> Col
                </button>
                <button type="button" class="format-btn table-control-btn danger" (click)="deleteTable()" title="Delete Table">
                  <fa-icon [icon]="faTrash"></fa-icon> Delete
                </button>
              </div>
            </div>
            <div 
              class="editor-content"
              contenteditable="true"
              [class.is-invalid]="editContentControl?.invalid && editContentControl?.touched"
              (input)="onEditContentChange($event)"
              (blur)="onEditContentBlur()"
              placeholder="Enter note content..."
            ></div>
          </div>
          <div *ngIf="editContentControl?.invalid && editContentControl?.touched" class="error-message">
            <div *ngIf="editContentControl?.errors?.['required']">Content is required</div>
            <div *ngIf="editContentControl?.errors?.['minlength']">Content must be at least 1 character</div>
          </div>
        </div>

        <div class="form-group">
          <label for="editFolderId">Folder *</label>
          <select 
            id="editFolderId" 
            formControlName="folderId"
            class="form-control"
            [class.is-invalid]="editFolderIdControl?.invalid && editFolderIdControl?.touched"
          >
            <option value="">Select a folder</option>
            <option *ngFor="let folder of folders" [value]="folder.id">
              {{ folder.name }}
            </option>
          </select>
          <div *ngIf="editFolderIdControl?.invalid && editFolderIdControl?.touched" class="error-message">
            <div *ngIf="editFolderIdControl?.errors?.['required']">Folder is required</div>
          </div>
        </div>

        <div class="form-group">
          <label>Tags</label>
          <div class="tags-selection">
            <div class="tags-list">
              <div 
                *ngFor="let tag of tags" 
                class="tag-option"
                [class.selected]="isEditTagSelected(tag.id)"
                (click)="toggleEditTagSelection(tag.id)"
              >
                {{ tag.name }}
              </div>
            </div>
            <div *ngIf="getSelectedEditTags().length > 0" class="selected-tags">
              <span class="selected-tags-label">Selected:</span>
              <span *ngFor="let tag of getSelectedEditTags()" class="selected-tag">
                {{ tag.name }}
                <button 
                  type="button" 
                  class="remove-tag-btn" 
                  (click)="removeEditTagSelection(tag.id)"
                  title="Remove tag"
                >
                  √ó
                </button>
              </span>
            </div>
          </div>
        </div>

        

        <div class="form-group">
          <label for="editCategory">Category</label>
          <input 
            type="text" 
            id="editCategory" 
            formControlName="category"
            class="form-control"
            placeholder="Enter category (optional)"
          >
        </div>
        <div class="form-group">
          <label>Add Team</label>
          <div class="team-selection">
            <div class="dropdown-container">
              <button 
                type="button"
                class="dropdown-toggle" 
                (click)="toggleEditTeamDropdown()"
              >
                <span *ngIf="!selectedEditTeamToAssign">Select a team to assign...</span>
                <span *ngIf="selectedEditTeamToAssign">{{ selectedEditTeamToAssign.name }}</span>
                <fa-icon [icon]="faPlus"></fa-icon>
              </button>
              
              <div class="dropdown-menu" *ngIf="showEditTeamDropdown">
                <div class="dropdown-options">
                  <div 
                    class="dropdown-option" 
                    *ngFor="let team of availableEditTeams"
                    (click)="selectEditTeamToAssign(team)"
                  >
                    {{ team.name }}
                  </div>
                  <div 
                    class="dropdown-option no-results" 
                    *ngIf="availableEditTeams.length === 0"
                  >
                    No teams available
                  </div>
                </div>
              </div>
            </div>
            
            <div *ngIf="getEditAssignedTeams().length > 0" class="assigned-teams">
              <span class="assigned-teams-label">Selected:</span>
              <span *ngFor="let team of getEditAssignedTeams()" class="assigned-team">
                {{ team.name }}
                <button 
                  type="button" 
                  class="remove-tag-btn" 
                  (click)="removeEditAssignedTeam(team.id)"
                  title="Remove team"
                >
                  √ó
                </button>
              </span>
            </div>
          </div>
        </div>

      </form>
    </div>
    
    <div class="modal-footer">
      <button type="submit" class="save-btn" [disabled]="editNoteForm.invalid || updatingNote" (click)="updateNote()">Update Note</button>
      <button type="button" class="cancel-btn" (click)="closeEditNoteModal()">Cancel</button>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" *ngIf="showDeleteConfirmationModal" (click)="closeDeleteConfirmationModal()">
  <div class="modal-content delete-confirmation-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Delete "{{ noteToDelete?.title }}"</h2>
      <button class="close-btn" (click)="closeDeleteConfirmationModal()">√ó</button>
    </div>
    
    <div class="modal-body">
      <div class="confirmation-content">
        <div class="confirmation-icon">
          <fa-icon [icon]="faExclamationTriangle"></fa-icon>
        </div>
        <div class="confirmation-text">
          <p>Are you sure you want to delete this note?</p>
          <p class="warning-text">This action cannot be undone. The note will be permanently deleted.</p>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      
      <button type="button" class="cancel-btn" (click)="closeDeleteConfirmationModal()">Cancel</button>
      <button type="button" class="delete-btn" (click)="confirmDelete()" [disabled]="deletingNote">
        
        {{ deletingNote ? 'Deleting...' : 'Delete Note' }}
      </button>
    </div>
  </div>
</div>

<!-- View Profile Modal -->
<div class="modal-overlay" *ngIf="showViewProfileModal" (click)="closeViewProfileModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>User Profile</h2>
      <button class="close-btn" (click)="closeViewProfileModal()">√ó</button>
    </div>
    
    <div class="modal-body">
      <div class="profile-content" *ngIf="authService.getCurrentUser()">
        <div class="profile-section">
          <h3>Personal Information</h3>
          <div class="profile-info">
            <div class="info-row">
              <span class="info-label">Full Name:</span>
              <span class="info-value">{{ authService.getCurrentUser()?.firstName }} {{ authService.getCurrentUser()?.lastName }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Email:</span>
              <span class="info-value">{{ authService.getCurrentUser()?.email }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Date of Birth:</span>
              <span class="info-value">{{ authService.getCurrentUser()?.dateOfBirth | date:'longDate' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- No Folders Modal -->
<div class="modal-overlay" *ngIf="showNoFoldersModal" (click)="closeNoFoldersModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>No Folders Created</h2>
      <button class="close-btn" (click)="closeNoFoldersModal()">√ó</button>
    </div>
    
    <div class="modal-body">
      <div class="validation-message">
        <p>No folders created yet! Create a folder first from the left column.</p>
      </div>
    </div>
  </div>
</div>

<!-- No Tags Modal -->
<div class="modal-overlay" *ngIf="showNoTagsModal" (click)="closeNoTagsModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>No Tags Created</h2>
      <button class="close-btn" (click)="closeNoTagsModal()">√ó</button>
    </div>
    
    <div class="modal-body">
      <div class="validation-message">
        <p>No tags created yet! Create a tag first from the top header.</p>
      </div>
    </div>
  </div>
</div>

<!-- Toaster Notification -->
<div class="toaster" *ngIf="showToaster" [class.success]="toasterType === 'success'" [class.error]="toasterType === 'error'">
  <div class="toaster-content">
    <div class="toaster-icon" *ngIf="toasterType === 'success'">
      <fa-icon [icon]="faCheck"></fa-icon>
    </div>
    <div class="toaster-text">
      <h3 class="toaster-title" *ngIf="toasterMessage.includes('Created New Folder')">Created New Folder</h3>
      <h3 class="toaster-title" *ngIf="toasterMessage.includes('Created New Tag')">Created New Tag</h3>
      <h3 class="toaster-title" *ngIf="toasterMessage.includes('Created New Note')">Created New Note</h3>
      <span class="toaster-message">{{ toasterMessage.replace('Created New Folder\n', '').replace('Created New Tag\n', '').replace('Created New Note\n', '') }}</span>
    </div>
    <button class="toaster-close" (click)="hideToasterNotification()">√ó</button>
  </div>
</div>

<main class="main-content">
  <router-outlet></router-outlet>
</main>
